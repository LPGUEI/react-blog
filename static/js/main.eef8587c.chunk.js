(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{26:function(t,n,e){"use strict";e.r(n);var c,a,i,r,o,s,j,b,d,u=e(13),l=e.n(u),p=e(5),x=e(2),O=e(0),h=e(3),f=e(7),g=e(4),m=Object(O.createContext)(null),v="token",y=function(t){return localStorage.setItem(v,t)},S=function(){return localStorage.getItem(v)},w="https://student-json-api.lidemy.me",k=function(){return fetch("".concat(w,"/posts?_sort=createdAt&_order=desc")).then((function(t){return t.json()}))},z=function(){var t=S();return fetch("".concat(w,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()}))},C=e(1),P=h.a.div(c||(c=Object(x.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n  box-sizing: border-box;\n  background-color: #333;\n  color: #c5c5c5;\n"]))),N=h.a.div(a||(a=Object(x.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]))),U=h.a.div(i||(i=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]))),A=Object(h.a)(f.b)(r||(r=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  text-decoration: none;\n  color: #c5c5c5;\n\n  ","\n"])),(function(t){return t.$active&&"\n    background: rgba(0, 0, 0, 0.2);\n  "})),$=h.a.div(o||(o=Object(x.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"])),U);function L(){var t=Object(O.useContext)(m),n=t.user,e=t.setUser,c=Object(g.e)(),a=Object(g.f)();return Object(C.jsxs)(P,{children:[Object(C.jsxs)($,{children:[Object(C.jsx)(N,{children:"My Blog"}),Object(C.jsxs)(U,{children:[Object(C.jsx)(A,{to:"/",$active:"/"===c.pathname,children:"Home"}),Object(C.jsx)(A,{to:"/articles",$active:"/articles"===c.pathname,children:"Articles"}),n&&Object(C.jsx)(A,{to:"/new-post",$active:"/new-post"===c.pathname,children:"New Post"}),Object(C.jsx)(A,{to:"/about",$active:"/about"===c.pathname,children:"About"})]})]}),Object(C.jsxs)(U,{children:[!n&&Object(C.jsx)(A,{to:"/signup",$active:"/signup"===c.pathname,children:"Sign Up"}),!n&&Object(C.jsx)(A,{to:"/login",$active:"/login"===c.pathname,children:"Login"}),n&&Object(C.jsx)(A,{onClick:function(){y(null),e(null),"/"!==c.pathname&&a("/")},to:"/",children:"Logout"})]})]})}var _,E,I,J,B,T,R,D=h.a.div(s||(s=Object(x.a)(["\n  width: 80%;\n  margin: 30px auto;\n"]))),G=h.a.div(j||(j=Object(x.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  padding: 16px;\n"]))),H=Object(h.a)(f.b)(b||(b=Object(x.a)(["\n  font-size: 16px;\n  color: #666;\n  text-decoration: none;\n"]))),M=h.a.div(d||(d=Object(x.a)(["\n  color: #666;\n"])));function q(t){var n=t.post;return Object(C.jsxs)(G,{children:[Object(C.jsx)(H,{to:"/posts/".concat(n.id),children:n.title}),Object(C.jsx)(M,{children:new Date(n.createdAt).toLocaleString()})]})}function F(){var t=Object(O.useState)([]),n=Object(p.a)(t,2),e=n[0],c=n[1];return Object(O.useEffect)((function(){k().then((function(t){c(t)}))}),[]),Object(C.jsx)(D,{children:e.map((function(t){return Object(C.jsx)(q,{post:t},t.id)}))})}var K,Q,V,W=h.a.form(_||(_=Object(x.a)(["\n  border: 1px solid rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  margin: 100px auto;\n  text-align: center;\n  width: 25%;\n  padding: 50px;\n  color: #666;\n  font-size: 24px;\n"]))),X=h.a.div(E||(E=Object(x.a)(["\n  font-size: 30px;\n  display: block;\n"]))),Y=h.a.div(I||(I=Object(x.a)(["\n  padding: 10px;\n  & + & {\n    margin-top: 10px;\n  }\n"]))),Z=h.a.input(J||(J=Object(x.a)(["\n  padding: 4px;\n  margin-top: 20px;\n"]))),tt=h.a.input(B||(B=Object(x.a)(["\n  padding: 4px;\n  margin-top: 20px;\n"]))),nt=h.a.button(T||(T=Object(x.a)(["\n  padding: 8px;\n  margin-top: 18px;\n  border-radius: 3px;\n  font-size: 16px;\n"]))),et=h.a.div(R||(R=Object(x.a)(["\n  color: red;\n  margin-top: 30px;\n"])));function ct(){var t=Object(O.useContext)(m).setUser,n=Object(O.useState)(""),e=Object(p.a)(n,2),c=e[0],a=e[1],i=Object(O.useState)(""),r=Object(p.a)(i,2),o=r[0],s=r[1],j=Object(O.useState)(),b=Object(p.a)(j,2),d=b[0],u=b[1],l=Object(g.f)(),x=Object(O.useCallback)((function(){u(null),function(t,n){return fetch("".concat(w,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(t){return t.json()}))}(c,o).then((function(n){if(0===n.ok)return u(n.message);y(n.token),z().then((function(n){if(1!==n.ok)return y(null),u(n.toString());t(n.data),l("/")}))}))}),[c,o]);return Object(C.jsxs)(W,{onSubmit:x,children:[Object(C.jsx)(X,{children:"LOGIN"}),Object(C.jsxs)(Y,{children:["Username:\xa0",Object(C.jsx)(Z,{value:c,type:"text",onChange:function(t){return a(t.target.value)}})]}),Object(C.jsxs)(Y,{children:["Password:\xa0\xa0",Object(C.jsx)(tt,{value:o,type:"password",onChange:function(t){return s(t.target.value)}})]}),Object(C.jsx)(nt,{children:"Login"}),d&&Object(C.jsx)(et,{children:d})]})}var at,it,rt,ot,st,jt,bt,dt,ut=h.a.div(K||(K=Object(x.a)(["\n  padding: 20px;\n  width: 60%;\n  margin: 0 auto;\n"]))),lt=h.a.div(Q||(Q=Object(x.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  padding: 20px;\n"]))),pt=h.a.div(V||(V=Object(x.a)(["\n  padding: 18px;\n  line-height: 32px;\n  text-align: justify;\n"])));function xt(t){var n=t.article;return Object(C.jsxs)(ut,{children:[Object(C.jsx)(lt,{children:n.title}),Object(C.jsx)(pt,{children:n.body})]})}function Ot(){var t=Object(g.g)().id,n=Object(O.useState)([]),e=Object(p.a)(n,2),c=e[0],a=e[1];return Object(O.useEffect)((function(){(function(t){return fetch("".concat(w,"/posts/").concat(t)).then((function(t){return t.json()}))})(t).then((function(t){return a(t)}))}),[t,c]),Object(C.jsx)(xt,{article:c})}var ht,ft,gt,mt,vt,yt=h.a.div(at||(at=Object(x.a)(["\n  width: 80%;\n  margin: 30px auto;\n"]))),St=h.a.div(it||(it=Object(x.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  padding: 16px;\n"]))),wt=Object(h.a)(f.b)(rt||(rt=Object(x.a)(["\n  font-size: 16px;\n  color: #666;\n  text-decoration: none;\n"]))),kt=h.a.div(ot||(ot=Object(x.a)(["\n  color: #666;\n"]))),zt=h.a.div(st||(st=Object(x.a)(["\n  margin: 0 auto;\n  text-align: center;\n  color: #666;\n"]))),Ct=h.a.div(jt||(jt=Object(x.a)(["\n  display: inline-block;\n  padding: 10px;\n  background: #zzz;\n  cursor: pointer;\n"]))),Pt=h.a.div(bt||(bt=Object(x.a)(["\n  display: inline-block;\n  padding: 10px;\n  background: #zzz;\n"]))),Nt=h.a.div(dt||(dt=Object(x.a)(["\n  text-align: center;\n  margin-top: 20px;\n  font-size: 18px;\n  color: #666;\n"])));function Ut(t){var n=t.post;return Object(C.jsxs)(St,{children:[Object(C.jsx)(wt,{to:"/posts/".concat(n.id),children:n.title}),Object(C.jsx)(kt,{children:new Date(n.createdAt).toLocaleString()})]})}function At(){var t=Object(O.useState)([]),n=Object(p.a)(t,2),e=n[0],c=n[1],a=Object(O.useState)(1),i=Object(p.a)(a,2),r=i[0],o=i[1],s=Object(O.useState)(0),j=Object(p.a)(s,2),b=j[0],d=j[1];Object(O.useEffect)((function(){var t;(t=r,fetch("".concat(w,"/posts?_page=").concat(t,"&_limit=5&_sort=createdAt&_order=desc")).then((function(t){return t.json()}))).then((function(t){c(t)})),k().then((function(t){d((function(n){return Math.ceil((t.length-1)/5)}))}))}),[r,b]);var u=Object(O.useCallback)((function(){r>1&&o((function(t){return t-1}))}),[r]),l=Object(O.useCallback)((function(){r<b&&o(r+1)}),[r,b]);return Object(C.jsxs)(yt,{children:[e.map((function(t){return Object(C.jsx)(Ut,{post:t},t.id)})),Object(C.jsxs)(zt,{children:[!(1===r)&&Object(C.jsx)(Ct,{onClick:u,children:"Prev"}),Object(C.jsx)(Pt,{children:r}),!(r===b)&&Object(C.jsx)(Ct,{onClick:l,children:"Next"})]}),Object(C.jsxs)(Nt,{children:[r," / ",b]})]})}var $t,Lt,_t=h.a.form(ht||(ht=Object(x.a)(["\n  margin: 0 auto;\n  width: 800px;\n  padding: 20px;\n"]))),Et=h.a.input(ft||(ft=Object(x.a)(["\n  width: 360px;\n  margin: 20px;\n"]))),It=h.a.textarea(gt||(gt=Object(x.a)(["\n  width: 600px;\n  height: 300px;\n  border-radius: 3px;\n"]))),Jt=h.a.button(mt||(mt=Object(x.a)(["\n  color: #666;\n  display: block;\n  margin-top: 20px;\n"]))),Bt=h.a.div(vt||(vt=Object(x.a)(["\n  color: red;\n  font-size: 20px;\n  margin-bottom: 20px;\n"])));function Tt(){var t=Object(g.f)(),n=Object(O.useState)(""),e=Object(p.a)(n,2),c=e[0],a=e[1],i=Object(O.useState)(""),r=Object(p.a)(i,2),o=r[0],s=r[1],j=Object(O.useState)(""),b=Object(p.a)(j,2),d=b[0],u=b[1],l=Object(O.useCallback)((function(){if(u(null),c&&o)(function(t,n){var e=S();return fetch("".concat(w,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:t,body:n})}).then((function(t){return t.json()}))})(c,o).then((function(n){t("/")}));else{u("Please input missing field")}}),[c,o]);return Object(C.jsxs)(_t,{onSubmit:l,children:["Title:",Object(C.jsx)(Et,{value:c,onChange:function(t){return a(t.target.value)},type:"text"}),Object(C.jsx)(It,{value:o,onChange:function(t){return s(t.target.value)},type:"text"}),d&&Object(C.jsx)(Bt,{children:d}),Object(C.jsx)(Jt,{children:"New Post"})]})}var Rt,Dt,Gt,Ht,Mt,qt,Ft,Kt,Qt=h.a.div($t||($t=Object(x.a)(["\n  margin: 30px auto;\n"]))),Vt=h.a.div(Lt||(Lt=Object(x.a)(["\n  text-align: center;\n  font-size: 20px;\n  color: #666;\n"])));function Wt(){return Object(C.jsx)(Qt,{children:Object(C.jsx)(Vt,{children:"Hello, this is a SPA blog made with React & React Routers"})})}var Xt,Yt=h.a.form(Rt||(Rt=Object(x.a)(["\n  border: 1px solid rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  text-align: center;\n  margin: 100px auto;\n  width: 25%;\n  padding: 50px;\n  color: #666;\n  font-size: 24px;\n"]))),Zt=h.a.div(Dt||(Dt=Object(x.a)(["\n  padding: 5px;\n  margin-bottom: 10px;\n  font-size: 30px;\n"]))),tn=h.a.div(Gt||(Gt=Object(x.a)(["\n  padding: 10px;\n  & + & {\n    margin-top: 10px;\n  }\n"]))),nn=h.a.input(Ht||(Ht=Object(x.a)(["\n  padding: 4px;\n"]))),en=h.a.input(Mt||(Mt=Object(x.a)(["\n  padding: 4px;\n"]))),cn=h.a.input(qt||(qt=Object(x.a)(["\n  padding: 4px;\n"]))),an=h.a.button(Ft||(Ft=Object(x.a)(["\n  padding: 8px;\n  margin-top: 18px;\n  border-radius: 3px;\n  font-size: 16px;\n"]))),rn=h.a.div(Kt||(Kt=Object(x.a)(["\n  color: red;\n  margin-top: 30px;\n"])));function on(){var t=Object(O.useContext)(m),n=(t.user,t.setUser),e=Object(O.useState)(""),c=Object(p.a)(e,2),a=c[0],i=c[1],r=Object(O.useState)(""),o=Object(p.a)(r,2),s=o[0],j=o[1],b=Object(O.useState)(""),d=Object(p.a)(b,2),u=d[0],l=d[1],x=Object(O.useState)(),h=Object(p.a)(x,2),f=h[0],v=h[1],S=Object(g.f)(),k=Object(O.useCallback)((function(){v(null),function(t,n,e){return fetch("".concat(w,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:n,password:e})}).then((function(t){return t.json()}))}(a,s,u).then((function(t){if(0===t.ok)return v(t.message);y(t.token),z().then((function(t){if(1!==t.ok)return y(null),v(t.toString());n(t.data),S("/")}))}))}),[a,s,u]);return Object(C.jsxs)(Yt,{onSubmit:k,children:[Object(C.jsx)(Zt,{children:"SIGN UP"}),Object(C.jsxs)(tn,{children:["Nickname:\xa0",Object(C.jsx)(en,{value:a,type:"text",onChange:function(t){return i(t.target.value)}})]}),Object(C.jsxs)(tn,{children:["Username:\xa0",Object(C.jsx)(nn,{value:s,type:"text",onChange:function(t){return j(t.target.value)}})]}),Object(C.jsxs)(tn,{children:["Password:\xa0\xa0",Object(C.jsx)(cn,{value:u,type:"password",onChange:function(t){return l(t.target.value)}})]}),Object(C.jsx)(an,{children:"Sign Up"}),f&&Object(C.jsx)(rn,{children:f})]})}var sn=h.a.div(Xt||(Xt=Object(x.a)(["\n  padding-top: 64px;\n"])));function jn(){var t=Object(O.useState)(null),n=Object(p.a)(t,2),e=n[0],c=n[1];return Object(O.useEffect)((function(){S()&&z().then((function(t){t.ok&&c(t.data)}))}),[]),Object(C.jsx)(m.Provider,{value:{user:e,setUser:c},children:Object(C.jsx)(sn,{children:Object(C.jsxs)(f.a,{children:[Object(C.jsx)(L,{}),Object(C.jsxs)(g.c,{children:[Object(C.jsx)(g.a,{exact:!0,path:"/",element:Object(C.jsx)(F,{})}),Object(C.jsx)(g.a,{path:"/posts/:id",element:Object(C.jsx)(Ot,{})}),Object(C.jsx)(g.a,{path:"/articles",element:Object(C.jsx)(At,{})}),Object(C.jsx)(g.a,{path:"/new-post",element:Object(C.jsx)(Tt,{})}),Object(C.jsx)(g.a,{path:"/about",element:Object(C.jsx)(Wt,{})}),Object(C.jsx)(g.a,{path:"/signup",element:Object(C.jsx)(on,{})}),Object(C.jsx)(g.a,{path:"/login",element:Object(C.jsx)(ct,{})})]})]})})})}l.a.render(Object(C.jsx)(jn,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.eef8587c.chunk.js.map